{% extends "layout.html" %}

{% block title %} Accounts {% endblock %}

{% block content %}
<div class="desktop-container">
    <div style="display:flex;gap:20px;">
        <h1>Your accounts</h1><button class="main-btn btn"><a href="{{ url_for('account') }}">Add new account</a></button>
    </div>
    <h2 class="green-text" style="margin: 15px 0;">Assets</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Balance</th>
                <th>Last Updated</th>
                <th>Visit Account</th>
                <th>Actions</th>
            </tr>
        </thead>
        {% for a in assets %}
        <tr>
            <td data-label="Name">{{ a.name }}</td>
            <td data-label="Category">{{ a.category }}</td>
            <td data-label="Balance">{{ a.balance | usd }}</td>
            <td data-label="Last Updated">{{ a.last_updated | localtime(timezone) }}</td>
            <td data-label="Visit Account"><a class="white-link" target="_blank" href="{{ a.url }}">Go to website</a></td>
            <td data-label="Actions">
                <!-- Edit link -->
                <a class="green-link" href="{{ url_for('account', account_id=a.id) }}">Edit</a>&nbsp;|&nbsp;

                <!-- Safe Delete form -->
                <form action="{{ url_for('delete', account_id=a.id) }}" method="POST" style="display:inline;">
                    <button class="white-link" type="submit" onclick="return confirm('Are you sure you want to delete this account?');">
                        Delete
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <h2 class="green-text" style="margin: 15px 0;">Liabilities</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Balance</th>
                <th>Last Updated</th>
                <th>Visit Account</th>
                <th>Actions</th>
            </tr>
        </thead>
        {% for l in liabilities %}
        <tr>
            <td data-label="Name">{{ l.name }}</td>
            <td data-label="Category">{{ l.category }}</td>
            <td data-label="Balance">{{ l.balance | usd }}</td>
            <td data-label="Last Updated">{{ l.last_updated | localtime(timezone) }}</td>
            <td data-label="Visit Account"><a class="white-link" target="_blank" href="{{ l.url }}">Go to website</a></td>
            <td data-label="Actions">
                <!-- Edit link -->
                <a class="green-link" href="{{ url_for('account', account_id=l.id) }}">Edit</a>&nbsp;|&nbsp;

                <!-- Safe Delete form -->
                <form action="{{ url_for('delete', account_id=l.id) }}" method="POST" style="display:inline;">
                    <button class="white-link" type="submit" onclick="return confirm('Are you sure you want to delete this account?');">
                        Delete
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}
