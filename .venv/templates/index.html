{% extends "layout.html" %}

{% block title %} My Dashboard {% endblock %}

{% block content %}

<div class="desktop-container">
    <div class="space-between">
        <div style="display:flex;gap:15px;"><h1>Hello, {{user.first_name}}!</h1><button class="main-btn btn"><a href="/update-networth">Update Net Worth</a></button></div>
        <p><span class="green-text" style="font-weight:700;">Today is:</span> {{ today }}</p>
    </div>

    <div class="grid-container" style="margin-top:25px;">
        <div class="gray-widget">
            <h3>Net Worth Value</h3>
            <div class="value-text">{{ networth | usd }}</div>
            {% if mom_label %}
            <p class="green-text">{{ mom_label }}</p>
            {% endif %}
            <p>Last updated: {{ last_updated | localtime(timezone) }}</p>
        </div>
        <div class="gray-widget">
        <h3>Assets</h3>
            {% if asset_total %}
            <div class="value-text">{{ asset_total | usd }}</div>
            <a class="green-link" href="/accounts">View details</a>
            {% else %}
            No assets yet. <a class="green-link" href="/account">Add an account</a>.
            {% endif %}

        </div>

        <div class="gray-widget">
            <h3>Liabilities</h3>
                {% if liability_total %}
                <div class="value-text">{{ liability_total | usd}}</div>
                <a class="green-link" href="/accounts#liabilities">View details</a>
                {% else %}
                No liabilities yet. <a class="green-link" href="/account">Add an account</a>.
                {% endif %}
        
        </div>
    </div>

    <div class="grid-container" style="margin-top:25px;">
        <div class="gray-widget">
            <div style="display: flex; align-items: center;gap:12px;"><div class="green-icon"><svg width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path fill="#000000" d="M296 88C296 74.7 306.7 64 320 64C333.3 64 344 74.7 344 88L344 128L400 128C417.7 128 432 142.3 432 160C432 177.7 417.7 192 400 192L285.1 192C260.2 192 240 212.2 240 237.1C240 259.6 256.5 278.6 278.7 281.8L370.3 294.9C424.1 302.6 464 348.6 464 402.9C464 463.2 415.1 512 354.9 512L344 512L344 552C344 565.3 333.3 576 320 576C306.7 576 296 565.3 296 552L296 512L224 512C206.3 512 192 497.7 192 480C192 462.3 206.3 448 224 448L354.9 448C379.8 448 400 427.8 400 402.9C400 380.4 383.5 361.4 361.3 358.2L269.7 345.1C215.9 337.5 176 291.4 176 237.1C176 176.9 224.9 128 285.1 128L296 128L296 88z"/></svg></div><h3>Net Worth Over Time</h3></div>
            {% if line_chart %}
            <img class="chart-img line-img" src="data:image/png;base64, {{ line_chart }}" alt="Net worth line chart">
            {% else %}
            <p>No net worth history yet.</p>
            {% endif %}
        </div>

        <div class="gray-widget">
             <div style="display: flex; align-items: center;gap:12px;"><div class="green-icon"><svg width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path fill="#000000" d="M128 128C92.7 128 64 156.7 64 192L64 448C64 483.3 92.7 512 128 512L512 512C547.3 512 576 483.3 576 448L576 192C576 156.7 547.3 128 512 128L128 128zM320 224C373 224 416 267 416 320C416 373 373 416 320 416C267 416 224 373 224 320C224 267 267 224 320 224zM512 248C512 252.4 508.4 256.1 504 255.5C475 251.9 452.1 228.9 448.5 200C448 195.6 451.6 192 456 192L504 192C508.4 192 512 195.6 512 200L512 248zM128 392C128 387.6 131.6 383.9 136 384.5C165 388.1 187.9 411.1 191.5 440C192 444.4 188.4 448 184 448L136 448C131.6 448 128 444.4 128 440L128 392zM136 255.5C131.6 256 128 252.4 128 248L128 200C128 195.6 131.6 192 136 192L184 192C188.4 192 192.1 195.6 191.5 200C187.9 229 164.9 251.9 136 255.5zM504 384.5C508.4 384 512 387.6 512 392L512 440C512 444.4 508.4 448 504 448L456 448C451.6 448 447.9 444.4 448.5 440C452.1 411 475.1 388.1 504 384.5z"/></svg></div><h3>Assets vs. Liabilities</h3></div>
            {% if pie_chart %}
            <img class="chart-img pie-img" src="data:image/png;base64, {{ pie_chart }}" alt="Networth pie chart">
            {% else %}
            <p>No net worth history yet.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}